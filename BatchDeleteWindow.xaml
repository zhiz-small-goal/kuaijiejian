<Window x:Class="Kuaijiejian.BatchDeleteWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="æ‰¹é‡åˆ é™¤åŠ¨ä½œ" 
        Width="450" 
        Height="500"
        WindowStartupLocation="CenterOwner"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="NoResize">
    
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
    </Window.Resources>
    
    <Border Background="White" 
            CornerRadius="12" 
            BorderBrush="#E5E7EB" 
            BorderThickness="1">
        <Border.Effect>
            <DropShadowEffect ShadowDepth="0" BlurRadius="20" Opacity="0.2"/>
        </Border.Effect>
        
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- æ ‡é¢˜æ  -->
            <Border Grid.Row="0" 
                    Background="#F3F4F6" 
                    CornerRadius="12,12,0,0" 
                    Padding="20,15">
                <Grid>
                    <TextBlock Text="ðŸ—‘ï¸ æ‰¹é‡åˆ é™¤åŠ¨ä½œ" 
                               FontSize="16" 
                               FontWeight="SemiBold" 
                               Foreground="#1F2937"/>
                    <Button Content="âœ•" 
                            Width="24" 
                            Height="24"
                            HorizontalAlignment="Right"
                            Click="CloseButton_Click"
                            Cursor="Hand"
                            Background="Transparent"
                            BorderThickness="0"
                            FontSize="16"
                            Foreground="#6B7280"/>
                </Grid>
            </Border>

            <!-- æ“ä½œæŒ‰é’® -->
            <StackPanel Grid.Row="1" 
                        Orientation="Horizontal" 
                        Margin="20,15,20,10">
                <Button Content="å…¨é€‰" 
                        Click="SelectAll_Click"
                        Width="70" 
                        Height="30"
                        Margin="0,0,10,0"
                        Background="#EFF6FF"
                        BorderBrush="#3B82F6"
                        Foreground="#1E40AF"
                        FontSize="12"
                        Cursor="Hand"/>
                <Button Content="å–æ¶ˆå…¨é€‰" 
                        Click="DeselectAll_Click"
                        Width="70" 
                        Height="30"
                        Background="#F3F4F6"
                        BorderBrush="#9CA3AF"
                        Foreground="#4B5563"
                        FontSize="12"
                        Cursor="Hand"/>
                <TextBlock x:Name="CountTextBlock"
                           Text="å·²é€‰æ‹©: 0"
                           VerticalAlignment="Center"
                           Margin="20,0,0,0"
                           FontSize="12"
                           Foreground="#6B7280"/>
            </StackPanel>

            <!-- åŠŸèƒ½åˆ—è¡¨ -->
            <Border Grid.Row="2" 
                    Margin="20,0,20,15"
                    BorderBrush="#E5E7EB"
                    BorderThickness="1"
                    CornerRadius="8">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <ItemsControl x:Name="FunctionsListBox">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <CheckBox IsChecked="{Binding IsSelected, Mode=TwoWay}"
                                          Checked="CheckBox_Changed"
                                          Unchecked="CheckBox_Changed"
                                          BorderBrush="#F3F4F6"
                                          BorderThickness="0,0,0,1"
                                          Padding="3"
                                          Cursor="Hand"
                                          HorizontalContentAlignment="Left">
                                    <CheckBox.Style>
                                        <Style TargetType="CheckBox">
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="CheckBox">
                                                        <Border Background="White"
                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                                Padding="{TemplateBinding Padding}">
                                                            <Grid>
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="Auto"/>
                                                                    <ColumnDefinition Width="*"/>
                                                                </Grid.ColumnDefinitions>
                                                                
                                                                <!-- å‹¾é€‰æ¡† -->
                                                                <Border Grid.Column="0"
                                                                        Width="16" Height="16"
                                                                        BorderBrush="#D1D5DB"
                                                                        BorderThickness="1"
                                                                        CornerRadius="3"
                                                                        Background="White"
                                                                        VerticalAlignment="Center">
                                                                    <TextBlock Text="âœ“"
                                                                               FontSize="12"
                                                                               FontWeight="Bold"
                                                                               Foreground="#3B82F6"
                                                                               HorizontalAlignment="Center"
                                                                               VerticalAlignment="Center"
                                                                               Visibility="{Binding IsChecked, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BoolToVisibilityConverter}}"/>
                                                                </Border>
                                                                
                                                                <!-- æ–‡æœ¬ -->
                                                                <TextBlock Grid.Column="1"
                                                                           Text="{Binding DisplayText}"
                                                                           FontSize="13"
                                                                           Foreground="#374151"
                                                                           Margin="10,0,0,0"
                                                                           VerticalAlignment="Center"/>
                                                            </Grid>
                                                        </Border>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </CheckBox.Style>
                                </CheckBox>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>
            </Border>

            <!-- åº•éƒ¨æŒ‰é’® -->
            <StackPanel Grid.Row="3" 
                        Orientation="Horizontal" 
                        HorizontalAlignment="Right"
                        Margin="20,0,20,20">
                <Button Content="åˆ é™¤é€‰ä¸­é¡¹" 
                        Click="DeleteButton_Click"
                        Width="100" 
                        Height="35"
                        Margin="0,0,10,0"
                        Background="#EF4444"
                        BorderBrush="#DC2626"
                        Foreground="White"
                        FontSize="13"
                        FontWeight="SemiBold"
                        Cursor="Hand">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border Background="{TemplateBinding Background}"
                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                BorderThickness="1"
                                                CornerRadius="6">
                                            <ContentPresenter HorizontalAlignment="Center" 
                                                              VerticalAlignment="Center"/>
                                        </Border>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#DC2626"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
                <Button Content="å–æ¶ˆ" 
                        Click="CancelButton_Click"
                        Width="80" 
                        Height="35"
                        Background="#F3F4F6"
                        BorderBrush="#D1D5DB"
                        Foreground="#374151"
                        FontSize="13"
                        Cursor="Hand">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border Background="{TemplateBinding Background}"
                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                BorderThickness="1"
                                                CornerRadius="6">
                                            <ContentPresenter HorizontalAlignment="Center" 
                                                              VerticalAlignment="Center"/>
                                        </Border>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#E5E7EB"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
            </StackPanel>
        </Grid>
    </Border>
</Window>


